Description: Fix CVE-2010-4337.
Origin: http://git.sv.gnu.org/cgit/gnash.git/patch/?id=6d86dd8cb9d567d8a6cedac301850c7349fe0ced
Author: Gabriele Giacone <1o5g4r8o@gmail.com>
Bug-Debian: http://bugs.debian.org/605419

--- a/configure.ac
+++ b/configure.ac
@@ -2922,9 +2922,14 @@
 ########################## Final report begins... ############################
 ###
 
-cerr=/tmp/gnash-configure-errors.$$
-cwarn=/tmp/gnash-configure-warnings.$$
-crec=/tmp/gnash-configure-recommended.$$
+dnl Create temporary directory in a secure way
+tmp=`mktemp -d ${TMPDIR=/tmp}/gnash-configure-XXXXXX`
+if test \! -n "$tmp" || test \! -d "$tmp"; then
+  tmp=`(umask 077 && mkdir -d ${TMPDIR=/tmp}/gnash-configure-${RANDOM}-$$) 2>/dev/null`
+fi
+cerr=${tmp}/errors
+cwarn=${tmp}/warnings
+crec=${tmp}/recommended
 echo ""
 
 #trap 'rm cerr' 0 # trap isn't a good idea, might override other traps
@@ -3193,6 +3198,7 @@
   fi
 fi
 
+rmdir $tmp
 
 if test x$build_hildon = xyes; then #{
   if test x"$HILDON_LIBS" != x; then
